{% extends "partials/base.html" %}


{% block page_name %}
Home
{% endblock page_name %}



{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="container mx-auto pb-10">
    <a href="{% url 'core:home' %}">
        <div class="rounded-lg bg-gray-800 mt-32 mb-8 bg-cover bg-center mx-16"
            style="height: 40vh; background-image:url('static/image/main_2.jpg')">
        </div>
    </a>
    <div class="search w-auto mx-16 -mt-5">

        {% if request.user.is_authenticated %}
        <a href="{% url 'groups:create-group' %}">
            <div class="w-2/12  bg-green-500 text-center rounded text-white p-2 m-2 text-xl float-right">
                그룹 등록 하기
            </div>
        </a>
        <a href="{% url 'groups:my-groups'%}">
            <div class="w-2/12  bg-blue-500 text-center rounded text-white p-2 m-2 text-xl float-right ">
                참여중인 그룹보기
            </div>
        </a>

        {% endif %}
    </div>

    <div class="grid mx-16 mt-40">
        <form action="{% url 'core:home'%}" method="GET">
            <div class="float-right w-4/12 flex">
                <input type="text" placeholder="Search Group Title.." name="search">
                <button class="bg-gray-400 w-32 rounded-r hover:bg-gray-500" type="submit"><i
                        class="fa fa-search"></i></button>
            </div>
        </form>
    </div>

    <div class="grid mx-16 mt-6">
        {% for group in groups%}

        <a class="list-item flex my-3" href="{% url 'groups:detail' group.pk%}">
            <div class="flex-initial rounded w-56 h-32  bg-red-300 float-left bg-cover bg-center" {% if group.photo %}
                style="background-image:url({{group.get_photo}})">
                {%else%}
                style="background-image:url('/static/image/normal_image.jpg')">
                {% endif %}
            </div>

            <div class="group_{{group.id}} flex-initial h-32 w-full ml-8">
                <div class="flex h-24">
                    <p class="title flex-initial w-9/12 font-medium text-2xl hover:text-indigo-500">{{group.title}}</p>
                    <div class="flex-initial w-3/12">
                        <div class="leader m-1 bg-blue-700 rounded text-center h-8">
                            <p class="p-1 ml-1 mx-1 font-semibold text-white">{{group.leader}}</p>
                        </div>
                        <div class="created m-1 bg-blue-500 rounded text-center h-8">
                            <p class="p-1 ml-1 mx-1  text-white">{{group.created}}</p>
                        </div>
                        <div class="float-right count m-1 bg-gray-200 rounded w-16 text-center h-8 
                        {%if group.get_user_count == group.max_group_count%}
                        text-red-400
                        {%else%}
                        text-blue-400
                        {%endif%}
                        ">
                            <p class="p-1 ml-1 mx-1 font-semibold "> {{group.get_user_count}} /
                                {{group.max_group_count}}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="flex h-8">
                    <div class="category m-1 text-center flex-initial rounded h-8
                        {%if group.get_category_display == 'Study'%}
                        bg-teal-400  
                        {%elif group.get_category_display == 'Hobby'%}
                        bg-indigo-400 
                        {%elif group.get_category_display == 'Reading'%}
                        bg-blue-400 
                        {%elif group.get_category_display == 'Exercise'%}
                        bg-green-500 
                        {%endif%}
                    ">
                        <p class="p-1 ml-1 mx-1  text-base text-white">
                            {{group.get_category_display}}
                        </p>
                    </div>
                    <div class="planning_unit m-1 text-center  flex-initial rounded h-8
                        {%if group.planning_unit == 'week'%}
                            bg-gray-500  
                            {%elif group.planning_unit == 'day'%}
                            bg-gray-600 
                            {%endif%}
                        ">
                        <p class="p-1 ml-1 mx-1 text-base text-white">
                            {{group.planning_unit}}
                        </p>
                    </div>
                </div>
            </div>
        </a>
        <div class="flex items-center w-full my-1">
            <div class="h-px w-full bg-gray-400"></div>
            <div class="h-px w-full bg-gray-400 "></div>
        </div>

        {%endfor%}

        {% if is_paginated %}
        <div>
            <ul class="pagination float-right mt-8">
                <span>
                    {% if page_obj.has_previous %}
                    <li class="w-16 h-8 m-2 float-left"><a href="/?page={{page_obj.previous_page_number}}">Previous</a>
                    </li>
                    {% endif %}

                    {% for page in paginator.page_range%}
                    <li
                        class="w-4 h-8 m-2 float-left {%if page_obj.number == page %}text-indigo-600 font-bold {%endif%}">
                        <a href="/?page={{page}}">{{page}}</a></li>
                    {% endfor %}

                    {% if page_obj.has_next %}
                    <li class="w-16 h-8 m-2 float-left"><a href="/?page={{page_obj.next_page_number}}">Next</a></li>
                    {% endif %}
                </span>
                {%endif%}
            </ul>
        </div>
    </div>

</div>

{% endblock content %}